<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HTML5 Webcaster</title>
<script src="/socket.io/socket.io.js"></script>
</head>
<body>
<div style="position: absolute; top: 50px; left: 50px;">
<image id="receiver"></image>
<canvas id="canvasOne" width="500" height="300">
 Your browser does not support HTML5 Canvas.
</canvas>
<script type="text/javascript">
var socket = io.connect('http://localhost:3000/client');
var theCanvas = document.getElementById("canvasOne");
var receiver = document.getElementById('receiver');
var context = theCanvas.getContext("2d");
var active = false;
var streamdata;
var bytearray;
function drawCanvas(data) {
  bytearray = new Uint8Array(JSON.parse(data));
  imageheight = theCanvas.height;
  imagewidth = theCanvas.width;
  var imgdata = context.getImageData(0,0,imagewidth,imageheight);
  var imgdatalen = imgdata.data.length;
  for(var i=8;i<imgdatalen;i++)
  {
    imgdata.data[i] = bytearray[i];
  }
  context.putImageData(imagedata,0,0);
};
socket.on('data', function(data){drawCanvas(data)});

</script>
</div>
</body>
</html>
